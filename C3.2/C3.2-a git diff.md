```diff
From 9e2becae226d9ecfca42cc427826c9c85c59caf3 Mon Sep 17 00:00:00 2001
From: Emmanuel SARPEDON <emmanuel.sarpedon@appines.fr>
Date: Wed, 11 Jun 2025 12:40:09 +0400
Subject: [PATCH] fix(form prospection candidate): display profession select if
 not provided by Strapi

---
 src/components/strapi-page/StrapiComponent.tsx       | 10 +++++++++-
 .../public-view/mission/FormProspectionCandidate.tsx | 12 +++---------
 2 files changed, 12 insertions(+), 10 deletions(-)

diff --git a/src/components/strapi-page/StrapiComponent.tsx b/src/components/strapi-page/StrapiComponent.tsx
index c1b4a0be..9c360ba9 100644
--- a/src/components/strapi-page/StrapiComponent.tsx
+++ b/src/components/strapi-page/StrapiComponent.tsx
@@ -368,7 +368,14 @@ const StrapiComponent = async (
       );
 
     case "containers.form-prospection-candidate":
-      const recruitmentOfficer = await getRecruitmentOfficerData();
+      const [recruitmentOfficer, professions] = await Promise.all([
+        getRecruitmentOfficerData(),
+        block.Profession
+          ? new Promise<Profession[]>(resolve => {
+              resolve([]);
+            })
+          : getAllProfessions({ filterActive: true }),
+      ]);
 
       return (
         <FormProspectionCandidateFromStrapiPage
@@ -378,6 +385,7 @@ const StrapiComponent = async (
           recruitmentOfficer={recruitmentOfficer}
           padding={block.Padding || null}
           professionHubspotName={block.Profession}
+          professions={professions}
           leadsSourceHubspot={block.LeadsSource}
           campaigns={block.cpgns}
         />
diff --git a/src/containers/public-view/mission/FormProspectionCandidate.tsx b/src/containers/public-view/mission/FormProspectionCandidate.tsx
index d278c979..561ea15d 100644
--- a/src/containers/public-view/mission/FormProspectionCandidate.tsx
+++ b/src/containers/public-view/mission/FormProspectionCandidate.tsx
@@ -250,7 +250,7 @@ const FormProspectionCandidateLayout = <T extends FormProspectionCandidate>({
               }}
             />
 
-            {isOfficeContext ? (
+            {isOfficeContext || !professionHubspotName ? (
               <div className={"xl:col-span-12"}>
                 <Controller
                   name={"professionId"}
@@ -587,6 +587,7 @@ export const FormProspectionCandidateFromStrapiPage = (
   props: Pick<
     FormProspectionCandidate,
     | "professionHubspotName"
+    | "professions"
     | "label"
     | "anchor"
     | "align"
@@ -598,14 +599,7 @@ export const FormProspectionCandidateFromStrapiPage = (
 ) => {
   const submitFormHandler = useSubmitFormHandler({ source: "strapi" });
 
-  return (
-    <FormProspectionCandidateLayout
-      {...props}
-      isOfficeContext={false}
-      submitFormHandler={submitFormHandler}
-      professions={[]}
-    />
-  );
+  return <FormProspectionCandidateLayout {...props} isOfficeContext={false} submitFormHandler={submitFormHandler} />;
 };
 
 export type FormValues = {
-- 
2.49.0
```

### Contexte et objectifs du projet

L’application actuelle (PHP + MariaDB) couvre le **suivi d’avancement de la facturation** et sert de **logiciel de caisse SaaS**. Bien que fonctionnelle, elle souffre : interface datée, usage exclusivement desktop, base de données monolithique, impossibilité d’importer automatiquement les relevés bancaires et manque d’outils de supervision.  

---

### Périmètre fonctionnel

| ID   | Fonctionnalité « Must »        | Description synthétique                                                                              |
| ---- | ------------------------------ | ---------------------------------------------------------------------------------------------------- |
| F‑01 | **Règlements multiples**       | Associer plusieurs moyens de paiement (Espèces, CB, Chèque, Virement) à une même facture             |
| F‑02 | **Fond de caisse persistant**  | Reprise automatique du fond de caisse de la veille avec possibilité d’ajustement lors de l’ouverture |
| F‑03 | **Transfert du jour détaillé** | Génération d’un PDF indiquant : contrôle coupures, espèces Z et hors Z, fond de caisse résiduel      |
| F‑04 | **Interface superviseur**      | Tableau de bord temps réel (caisse par caisse, montants, écarts, historiques)                        |
| F‑05 | **Édition en liste**           | Grille de saisie / correction en masse des écritures                                                 |
| F‑06 | **Import virements**           | Upload CSV/Excel ; mapping semi‑automatique sur les colonnes (date, libellé, montant)                |
| F‑07 | **Export espèces filtré**      | Filtre par utilisateur + plage de dates ; export CSV/PDF détaillé.                                   |

---

### Architecture cible

`[React 18 + shadcn/ui] ←HTTPS→ [API Node.js•Express]                                        │                           Prisma ORM ↔ MariaDB 10.11                                        │                         Auth JWT / Passport.js`

- **Front‑end** : React 18, gestion d’état Zustand
    
- **Back‑end** : Next.js API et server actions
    
- **BD** : Maria DB, migration vers nouveau schéma.
    
Pas de déploiement automatisé, ni de monitoring. Ces deux points feront l’objet d’un autre projet.

---

**Macro‑planning** :

|Phase|Durée|Livrables|
|---|---|---|
|Sprint 0 – Cadrage|2 sem.|CDC v2 (gel périmètre)|
|Sprint 1 – Core API + Auth|2 sem.|Endpoints /auth & /users|
|Sprint 2 – Modules caisse|2 sem.|F‑01 → F‑03 en bêta|
|Sprint 3 – Imports / Exports|2 sem.|F‑04 → F‑07|
|Sprint 4 – UX|1 sem.|Corrections/ajustements retours utilisateurs sur app bêta|
|Mise en prod|1 j|Tag v1.0.0 + rollback plan|

Mise en production **au plus tard le 1ᵉʳ déc. 2024**, conforme à la contrainte client.

---

### Livrables attendus

1. **Cahier des charges **.
2. **Documentation utilisateur** PDF.

---

### Pré-requis

- VM accessible en SSH:
	- ports 3000, 80 et 443 ouverts
	- adresse IP statique
	- nom de domaine créé

- Backup base de donnée actuelle